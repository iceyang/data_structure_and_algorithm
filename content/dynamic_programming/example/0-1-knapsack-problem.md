---
title: "经典题目：01背包问题"
date: 2019-07-04T21:50:00+08:00
---

{{% panel header="题目描述" %}}

假设：现在有一个容量为 W 的背包，有 n 件物品，它们的重量为 [w1, w2, ..., w(n)]，它们的价值为 [v1, v2, ..., v(n)]。

问：背包能装入的物品的最大价值是多少？
 
{{%/ panel %}}

对于大问题，我们先寻找有没有办法拆解成小问题。

对于背包中的第i件物品，它是否放入背包，取决于背包中前 i-1 件物品的放置情况。

我们假定 V(i, j) 代表当背包容量为j时，前 i 件物品放入背包的最大价值。

那么对于第 i 件物品是否放入容量为 j 的背包中，我们有下面的推导过程：

1. 如果第 i 件物品的重量大于背包容量，那么最大价值等于前 i-1 件物品放入背包的最大价值，即 V(i, j) = V(i-1, j)
2. 如果第 i 件物品可以放入背包，那么
    * 当该物品放入背包时，背包需要腾出w(i)的空间，所以价值为 V(i-1, j-w(i)) + v(i)
    * 当该物品不放入背包时，价值为 V(i-1, j)
    * 最终最大价值 V(i, j) = max{ V(i-1, j), V(i-1, j-w(i)) + v(i) }

所以，我们得到最终的公式为：

```
1) 当j <w(i)时，V(i,j)=V(i-1,j)
2) 当i>=w(i)时，V(i,j)=max{V(i-1,j),V(i-1,j-w(i))+v(i)}
```

从上面的分析可以得出，这是符合动态规划特性的，属于多阶段决策问题：

* 重复子问题：子问题存在多次计算的情况；
* 无后效性：当前问题可以由子问题推导出来，子问题状态一旦确定，便不会更改；
* 最优子结构：每个解都是当前情况的最优解，问题的子问题都是当时状态下的最优选择。
